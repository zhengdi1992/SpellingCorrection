package com.alardear.util.string;

import com.alardear.aspect.CompressLogAspect;

public class TestCompress {
	
	
	public static void main(String[] args) throws Exception {
		String test = "{\"success\":true,\"code\":200,\"message\":\"\",\"data\":{\"env\":\"daily\",\"serviceName\":\"com.alibaba.intl.da.data.bus.api.DataBusApi:1.0.0.daily.public\",\"methodSignature\":\"execute~com.alibaba.intl.da.data.bus.api.DataBusRequest\",\"invokeParameters\":[{\"retryTimes\":0,\"batchNo\":\"\",\"bizType\":\"DIRECT\",\"clientId\":\"1\",\"data\":{\"keyInfo\":\"630105060318743\",\"moduleMask\":\"1:1111|2:11|3:1|4:11111111111|5:111|6:111|7:1|8:1|9:111111|10:1|11:111\"},\"retryInterval\":0,\"class\":\"com.alibaba.intl.da.data.bus.api.DataBusRequest\",\"apiId\":\"de43e50a6792e8522da8a343e51dcca8\",\"transactionId\":\"\"}],\"invokeTarget\":\"11.239.191.230:12200?v=2.0&_TIMEOUT=5000&_IDLETIMEOUT=10&_p=4&_SERIALIZETYPE=1\",\"invokeResult\":{\"respMessage\":\"OK\",\"rt\":891,<!--这里是耗时，0.89秒-->\"data\":[{\"INTELLECTUAL_PROPERTY\":{<!--知识产权-->\"INTELLECTUAL_PROPERTY_BRAND\":[]<!--知识产权-获取商标-->},\"INV\":{\"INV_ENTERPRISE\":[],<!--企业对外投资-->\"INV_LEGAL_PERSON\":[]<!--法人对外投资-->},\"CREDIT\":{<!--诚信评估模型及分数-->\"CREDIT_RECOMMENDED_AMOUNT\":null,\"CREDIT_RATE\":null},\"EXTERNAL_POSITION\":{<!--对外任职-->\"EXTERNAL_POSITION_LEGAL_PERSON\":[]},\"ONSITE\":{<!--实地信息（调用鹊桥接口获得）-->\"ONSITE_FACTORY_AUDIT\":[]},\"ENTERPRISE_OPERATION\":{<!--经营信息（调用鹊桥接口获得）-->\"ENTERPRISE_OPERATION_DOMESTIC_SHOP_DETAIL\":[],\"ENTERPRISE_OPERATION_TRADE_SERVICE\":[],\"ENTERPRISE_OPERATION_TRADE_OPERATION\":[],\"ENTERPRISE_OPERATION_ALI_FINANCE_BEHAVIOR\":[{\"STAT_DATE\":\"2016-12-2817:26:00.0\",\"CREDIT_AMT_CYS\":123.0,\"USED_CRD_FCLTY_ORD_CNT\":null,\"CUR_OVD30D_ORD_CNT_CYS\":654,\"CUR_OVD30D_ORD_AMT_CYS\":987.0,\"CRD_FCLTY_AMT\":null,\"OVD30D_ORD_CNT_CYS1Y\":null,\"ENABLE_BAL_AMT\":null,\"USED_AMT_CYS\":456.0,\"USED_CRD_FCLTY_AMT\":null,\"REG_NO\":\"630105060318743\",\"OVD30D_ORD_AMT_CYS1Y\":null,\"ENABLE_BAL_AMT_CYS\":321.0,\"USED_CYS_ORD_CNT\":789}],\"ENTERPRISE_OPERATION_DOMESTIC_PROCUREMENT\":[],\"ENTERPRISE_OPERATION_SHOP_INFO\":null},\"RISK\":{<!--风险信息（调用鹊桥接口获得）-->\"RISK_PUNISHMENT\":[],<!--行政处罚信息-->\"RISK_EQUITY_FREEZE\":[],<!--司法风险-失信公告-->\"RISK_CHANGE_DETAIL\":[],<!--变更信息-->\"RISK_EQUITY_PLEDGED\":[],<!--股权风险-股权出质-->\"RISK_MORTGAGE\":[],<!--财务风险-动产抵押-->\"RISK_PUNISH_BREAK\":[],<!--司法风险-法定代表人失信公告-->\"RISK_MORTGAGE_SUBJECT\":[],<!--财务风险-动产抵押物-->\"RISK_OPERATION_EXCEPTION\":[],<!--经营异常-->\"RISK_EXECUTION_ANNOUNCEMENT\":[],<!--司法风险-执行公告-->\"RISK_SCAN\":[]<!--风险扫码（调用鹊桥接口获得）-->},\"BASIC\":{\"BASIC_BRANCH\":[<!--分支结构（部分有）-->{\"BR_ADDR\":\"三亚市凤凰镇机场路口西侧\",\"REG_NO\":\"630105060318743\",\"BR_PRINCIPAL\":\"黄春光\",\"BR_REG_NO\":\"460200000060887\",\"BR_NAME\":\"测试分支机构\",\"CBU_ITEM\":\"糖果制品（硬质糖果、凝胶糖果）、饮料（固体饮料）、罐头（果蔬罐头）、饼干、酱腌菜、蜜饯、水果制品（干制品）、调味剂（固态）、方便食品（其它方便食品）、谷物粉类制成品、焙炒咖啡、椰子、椰子系列制品、榨油、农副产品、日杂、土产加工与销售（凡需行政许可的项目凭许可证经营）\"},{\"BR_ADDR\":\"三亚市凤凰镇机场路口西侧\",\"REG_NO\":\"630105060318743\",\"BR_PRINCIPAL\":\"测试\",\"BR_REG_NO\":\"460200000060887\",\"BR_NAME\":\"测试分支机构2\",\"CBU_ITEM\":\"糖果制品（硬质糖果、凝胶糖果）、饮料（固体饮料）、罐头（果蔬罐头）、饼干、酱腌菜、蜜饯、水果制品（干制品）、调味剂（固态）、方便食品（其它方便食品）、谷物粉类制成品、焙炒咖啡、椰子、椰子系列制品、榨油、农副产品、日杂、土产加工与销售（凡需行政许可的项目凭许可证经营）\"}],\"BASIC_SHAREHOLDER\":[<!--股东信息（暂不知道如何区分个人or公司）-->{\"CON_DATE\":\"2012-04-13\",<!--出资日期-->\"CREDIT_CODE\":\"916301053108957780\",<!--统一社会信用代码-->\"INVA_MOUNT\":\"2\",<!--股东总数量-->\"INV_SUM_FUNDED_RATIO\":\"100.00%\",<!--股东出资比例总和-->\"SUB_CONAM\":\"90.000000\",<!--认缴金额-->\"CON_FORM\":\"其他\",<!--出资方式-->\"SHA_NAME\":\"赵修伟\",<!--名称-->\"GMT_CREATE\":1480552344000,\"COUNTRY\":\"\",<!--国别-->\"REG_NO\":\"630105060318743\",<!--注册号-->\"FUNDED_RATIO\":\"90.00%\",<!--出资比例-->\"GMT_MODIFIED\":1480552344000,\"ID\":1542009,\"SUM_CONAM\":\"100.000000\",<!--股东出资金额总和-->\"REG_CAP_CUR\":\"\"<!--认缴出资币种-->},{\"CON_DATE\":\"2012-04-13\",\"CREDIT_CODE\":\"916301053108957780\",\"INVA_MOUNT\":\"2\",\"INV_SUM_FUNDED_RATIO\":\"100.00%\",\"SUB_CONAM\":\"10.000000\",\"CON_FORM\":\"其他\",\"SHA_NAME\":\"马清辉\",\"GMT_CREATE\":1480552344000,\"COUNTRY\":\"\",\"REG_NO\":\"630105060318743\",\"FUNDED_RATIO\":\"10.00%\",\"GMT_MODIFIED\":1480552344000,\"ID\":1542010,\"SUM_CONAM\":\"100.000000\",\"REG_CAP_CUR\":\"\"}],\"BASIC_MANAGER\":[<!--主要管理人员-->{\"POSITION\":\"执行董事兼总经理\",<!--职务-->\"SEX_CODE\":null,\"PER_NAME\":\"赵修伟\",<!--名称-->\"POSITION_CODE\":null,\"SEX\":\"男\",<!--性别-->\"PERSON_AMOUNT\":\"2\",<!--人员总数量-->\"NAT_DATE\":\"1974\"<!--出生年份-->},{\"POSITION\":\"监事\",\"SEX_CODE\":null,\"PER_NAME\":\"马清辉\",\"POSITION_CODE\":null,\"SEX\":\"女\",\"PERSON_AMOUNT\":\"2\",\"NAT_DATE\":\"1980\"},{\"POSITION\":\"执行董事兼总经理\",\"SEX_CODE\":null,\"PER_NAME\":\"赵修伟\",\"POSITION_CODE\":null,\"SEX\":\"男\",\"PERSON_AMOUNT\":\"2\",\"NAT_DATE\":\"1974\"},{\"POSITION\":\"监事\",\"SEX_CODE\":null,\"PER_NAME\":\"马清辉\",\"POSITION_CODE\":null,\"SEX\":\"女\",\"PERSON_AMOUNT\":\"2\",\"NAT_DATE\":\"1980\"}],\"BASIC\":[<!--基本信息-->{\"DATA_ID\":\"fc4a8040-8f48-4463-a7d4-b63fb1980721\",<!--未知@吴宝国(木深)-->\"ENT_NAME_ENG\":\"青海宏腾装饰有限公司\",<!--未知@吴宝国(木深)-->\"CAN_DATE\":\"2005-09-05\",<!--注销日期-->\"ENT_TYPE_CLS_CODE\":\"2001-1002\",<!--未知@吴宝国(木深)-->\"CREDIT_CODE\":\"916301053108957780\",<!--统一社会信用代码(目前三分之一有该值)-->\"INDUSTRY_CO_NAME\":\"建筑装饰业\",<!--国民经济行业名称-->\"ENT_TYPE_CLS\":\"企业\",<!--未知@吴宝国(木深)-->\"GMT_CREATE\":1480546366000,\"ES_DATE\":\"2014-09-25\",<!--成立日期-->\"REG_ORG_PROVINCE\":\"青海省\",<!--未知@吴宝国(木深)-->\"ID\":1540001,<!--未知@吴宝国(木深)-->\"BIRTH\":\"19740721\",<!--未知@吴宝国(木深)-->\"ENT_STATUS_UNION_CODE\":\"3001-1001\",<!--未知@吴宝国(木深)-->\"INDUSTRY_PHY\":\"建筑业\",<!--未知@吴宝国(木深)-->\"FR_NAME\":\"赵修伟\",<!--法人-->\"INDUSTRY_CO\":\"建筑装饰业\",<!--行业代码名称-->\"REG_CAP_CUR\":\"人民币\",<!--注册资本币种-->\"OP_FROM\":\"2014-09-25\",<!--经营期限自-->\"DOM\":\"青海省西宁市城北区小桥大街5号院4号楼\",<!--住址-->\"REV_DATE\":\"1995-11-20\",<!--吊销日期-->\"OP_TO\":\"2034-09-24\",<!--经营期限至-->\"OP_SCOPE\":\"室内外装饰装潢、设计、施工；园林景观；广告设计制作；城市亮化工程（以上范围依法须经批准的项目，经相关部门批准寿方可开展经营活动）※※※\",<!--经营范围-->\"REG_ORG\":\"青海省西宁市城北区工商行政管理局\",<!--等级机关-->\"CHANGE_DATE\":\"2014-09-25\",\"ABU_ITEM\":\"室内外装饰装潢、设计、施工；园林景观；广告设计制作；城市亮化工程（以上范围依法须经批准的项目，经相关部门批准寿方可开展经营活动）※※※\",<!--未知@吴宝国(木深)-->\"CBU_ITEM\":\"室内外装饰装潢、设计、施工；园林景观；广告设计制作；城市亮化工程（以上范围依法须经批准的项目，经相关部门批准寿方可开展经营活动）※※※\",<!--未知@吴宝国(木深)-->\"ENT_STATUS_UNION\":\"在营（开业）\",<!--未知@吴宝国(木深)-->\"ENT_NAME\":\"青海宏腾装饰有限公司\",<!--企业名称-->\"OP_SCO_AND_FORM\":\"室内外装饰装潢、设计、施工；园林景观；广告设计制作；城市亮化工程（以上范围依法须经批准的项目，经相关部门批准寿方可开展经营活动）※※※\",<!--未知@吴宝国(木深)-->\"INDUSTRY_CO_CODE\":\"5010\",<!--国民经济行业代码-->\"REG_CAP\":\"100.000000\",<!--注册资金-->\"REG_NO\":\"630105060318743\",<!--注册号-->\"PERSON_ID_BOCOM\":\"KrGFLvMTmxJrVFPuPqjWWN+fCZaj0gn6\",<!--未知@吴宝国(木深)-->\"GMT_MODIFIED\":1480546366000,\"REC_CAP\":\"0.000000\",<!--实收资金-->\"ENT_STATUS\":\"在营（开业）\",<!--经营状态-->\"ENT_TYPE\":\"有限责任公司(自然人投资或控股)\",<!--企业机构类型-->\"TS\":1480488766892,<!--未知@吴宝国(木深)-->\"REG_ORG_CODE\":\"630105\"<!--未知@吴宝国(木深)-->}]}}],\"start\":1489377504298,\"end\":1489377505189,\"class\":\"com.alibaba.intl.da.data.bus.api.DataBusResponse\",\"respCode\":\"200\"},\"success\":true,\"errorMsg\":null,\"traceId\":\"6445a1a414893775042492775d58d3\"}}";
		byte[] srcBytes = test.getBytes("UTF-8");		
		
		//test deflater algo
		CompressLogAspect deflaterLogHandler = new CompressLogAspect(new DeflaterCompressUtil());
		ICompress deflater = (ICompress) deflaterLogHandler.getProxy();
		String deflaterAfterStr = new String(deflater.uncompress(deflater.compress(srcBytes)),"UTF-8");
		System.out.println("After uncompress json is ok ? " + test.equals(deflaterAfterStr));
		
		//test gzip algo
		CompressLogAspect gzipLogHandler = new CompressLogAspect(new GZipCompressUtil());
		ICompress gzip = (ICompress) gzipLogHandler.getProxy();
		String gzipAfterStr = new String(gzip.uncompress(gzip.compress(srcBytes)),"UTF-8");
		System.out.println("After uncompress json is ok ? " + test.equals(gzipAfterStr));
			
		
	}
	
}